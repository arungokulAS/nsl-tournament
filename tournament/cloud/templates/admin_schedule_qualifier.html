{% extends 'nsl_home.html' %}
{% block content %}
<div class="glass-modal" style="max-width: 900px; margin: 48px auto 0 auto;">
    <div class="center-title" style="text-align:center;margin-bottom:32px;">Admin Qualifier Schedule</div>
    {% if messages %}
    <div style="margin: 16px 0; text-align: center;">
        {% for message in messages %}
        <div class="neon-btn" style="background:rgba(40,20,60,0.92);margin-bottom:8px;">{{ message }}</div>
        {% endfor %}
    </div>
    {% endif %}
    {% if not schedule_locked %}
    <form method="post" class="glass-form" style="margin-bottom: 18px;">
        {% csrf_token %}
        <input type="hidden" name="action" value="generate_schedule">
        <input type="password" name="password" placeholder="Admin Password" required style="margin-bottom:12px;">
        <label for="court_count">Number of Courts:</label>
        <select name="court_count" id="court_count" style="margin-left:8px;">
            <option value="4">4</option>
            <option value="8">8</option>
        </select>
        <button type="submit" class="neon-btn" style="margin-top:18px;">Generate Schedule</button>
    </form>
    <form method="post" class="glass-form" style="margin-bottom: 18px;">
        {% csrf_token %}
        <input type="hidden" name="action" value="delete_schedule">
        <input type="password" name="password" placeholder="Admin Password" required style="margin-bottom:12px;">
        <button type="submit" class="neon-btn" style="background:#a020f0;">Delete Schedule</button>
    </form>
    {% endif %}
    {% if schedule %}
    <table class="glass-table">
        <thead>
            <tr>
                <th>Match</th>
                <th>Court</th>
                <th>Status</th>
            </tr>
        </thead>
        <tbody>
            {% for match in schedule %}
            <tr>
                <td>{{ match.match }}</td>
                <td>{{ match.court }}</td>
                <td>{{ match.status }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    {% endif %}
    {% if schedule_locked %}
    <div class="neon-btn" style="margin-top:18px;background:rgba(40,20,60,0.92);text-align:center;">Schedule is locked. No further changes allowed.</div>
    <form method="post" class="glass-form" style="margin-top:18px;">
        {% csrf_token %}
        <input type="hidden" name="action" value="finish_round">
        <input type="password" name="password" placeholder="Admin Password" required style="margin-bottom:12px;">
        <button type="submit" class="neon-btn" style="background:#20f060;">Finish Qualifier</button>
    </form>
    {% endif %}
    {% if round_finished %}
    <div class="neon-btn" style="margin-top:18px;background:#20f060;color:#000;text-align:center;">Qualifier Finished. Schedule archived.</div>
    <div style="margin-top:18px;text-align:center;">
        <a href="/admin/schedule/pre-quarter" class="neon-btn" style="background:#a020f0;">Schedule Next Round: Pre-Quarter</a>
    </div>
    {% endif %}
</div>
{% endblock %}
